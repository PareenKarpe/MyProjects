/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package userinterface.SupervisorRole;

import Business.Enterprise.Enterprise;
import Business.Network.Network;
import Business.Organization.Organization;
import Business.Organization.staffOrganisation;
import Business.Organization.supervisorOrganisation;
import Business.UserAccount.UserAccount;
import Business.WorkQueue.SoilTestWorkRequest;
import java.awt.CardLayout;
import java.awt.Component;
import javax.swing.JOptionPane;
import javax.swing.JPanel;

/**
 *
 * @author cc130tx
 */
public class RequestSoilTestJPanel extends javax.swing.JPanel {

    /**
     * Creates new form RequestSoilTestJPanel
     */
    
    private JPanel userProcessContainer;
    private Enterprise enterprise;
    private UserAccount userAccount;
    private Network network;
    
    public RequestSoilTestJPanel(JPanel userProcessContainer, UserAccount account, Enterprise enterprise,Network network) {
        initComponents();
        
        this.userProcessContainer = userProcessContainer;
        this.enterprise = enterprise;
        this.userAccount = account;
        this.network = network;
        valueLabel.setText(enterprise.getName());        
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        areaButtonGroup = new javax.swing.ButtonGroup();
        enterpriseLabel = new javax.swing.JLabel();
        valueLabel = new javax.swing.JLabel();
        messageLabel = new javax.swing.JLabel();
        areaLabel = new javax.swing.JLabel();
        locationLabel = new javax.swing.JLabel();
        locationComboBox = new javax.swing.JComboBox();
        submitButton = new javax.swing.JToggleButton();
        backJButton = new javax.swing.JButton();
        jScrollPane1 = new javax.swing.JScrollPane();
        jTextArea1 = new javax.swing.JTextArea();
        indRadioBtn = new javax.swing.JRadioButton();
        resRadioBtn = new javax.swing.JRadioButton();

        setBackground(new java.awt.Color(204, 255, 204));

        enterpriseLabel.setFont(new java.awt.Font("Cambria", 1, 24)); // NOI18N
        enterpriseLabel.setText("EnterPrise :");

        valueLabel.setFont(new java.awt.Font("Cambria", 1, 24)); // NOI18N
        valueLabel.setText("<value>");

        messageLabel.setFont(new java.awt.Font("Calibri Light", 1, 18)); // NOI18N
        messageLabel.setText("Message");

        areaLabel.setFont(new java.awt.Font("Calibri Light", 1, 18)); // NOI18N
        areaLabel.setText("Area");

        locationLabel.setFont(new java.awt.Font("Calibri Light", 1, 18)); // NOI18N
        locationLabel.setText("Location");

        locationComboBox.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N

        submitButton.setFont(new java.awt.Font("Cambria", 1, 14)); // NOI18N
        submitButton.setText("Submit");
        submitButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                submitButtonActionPerformed(evt);
            }
        });

        backJButton.setFont(new java.awt.Font("Cambria", 1, 14)); // NOI18N
        backJButton.setText("Back");
        backJButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                backJButtonActionPerformed(evt);
            }
        });

        jTextArea1.setColumns(20);
        jTextArea1.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        jTextArea1.setRows(5);
        jScrollPane1.setViewportView(jTextArea1);

        areaButtonGroup.add(indRadioBtn);
        indRadioBtn.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        indRadioBtn.setText("Industrial");
        indRadioBtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                indRadioBtnActionPerformed(evt);
            }
        });

        areaButtonGroup.add(resRadioBtn);
        resRadioBtn.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        resRadioBtn.setText("Residential");
        resRadioBtn.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                resRadioBtnActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(307, 307, 307)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(submitButton, javax.swing.GroupLayout.PREFERRED_SIZE, 100, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                .addComponent(indRadioBtn)
                                .addComponent(locationLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 99, javax.swing.GroupLayout.PREFERRED_SIZE)))
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(layout.createSequentialGroup()
                                .addGap(118, 118, 118)
                                .addComponent(backJButton, javax.swing.GroupLayout.PREFERRED_SIZE, 95, javax.swing.GroupLayout.PREFERRED_SIZE)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 100, Short.MAX_VALUE))
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(resRadioBtn)
                                    .addComponent(locationComboBox, javax.swing.GroupLayout.PREFERRED_SIZE, 248, javax.swing.GroupLayout.PREFERRED_SIZE)))))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(0, 0, Short.MAX_VALUE)
                        .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 248, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addGap(370, 370, 370))
            .addGroup(layout.createSequentialGroup()
                .addGap(322, 322, 322)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(enterpriseLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 167, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(valueLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 260, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addComponent(messageLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 106, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(areaLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 106, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(68, 68, 68)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(valueLabel)
                    .addComponent(enterpriseLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 30, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(80, 80, 80)
                        .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 96, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(71, 71, 71))
                    .addGroup(layout.createSequentialGroup()
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                        .addComponent(messageLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 47, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(55, 55, 55)
                        .addComponent(areaLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 24, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(18, 18, 18)))
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(indRadioBtn)
                    .addComponent(resRadioBtn))
                .addGap(29, 29, 29)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(locationLabel, javax.swing.GroupLayout.PREFERRED_SIZE, 31, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(locationComboBox, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(42, 42, 42)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(submitButton, javax.swing.GroupLayout.PREFERRED_SIZE, 43, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(backJButton, javax.swing.GroupLayout.PREFERRED_SIZE, 43, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(245, Short.MAX_VALUE))
        );
    }// </editor-fold>//GEN-END:initComponents

    private void submitButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_submitButtonActionPerformed
        // TODO add your handling code here:  
            
        String message = jTextArea1.getText();
        
       if(message.length() == 0)
       {
            JOptionPane.showMessageDialog(null, "All fields are mandatory", "Error", JOptionPane.ERROR);
            return;
       }
        
        SoilTestWorkRequest request = new SoilTestWorkRequest();
        
        //Set the message
        request.setMessage(message);
        /*if(request.getSender().equals(null)|| request.getSender().equals(""))
        {
            request.setSender(userAccount);
        }*/
        request.setSender(userAccount);
        request.setNetwork(network);
        
        System.out.println(request.getSender());
        
        request.setEnterprise(enterprise);
        
        System.out.println("Insoil:"+request.getEnterprise());
        
        //Select the Area as per the request
         /*if(resCheckBox.isSelected())
         {
             request.setArea(resCheckBox.getText());
         }
         else
         {
             request.setArea(indCheckBox.getText());
         }*/
        
        if(indRadioBtn.isSelected())
        {
             request.setArea(indRadioBtn.getText());
        }
        else
        {
            request.setArea(resRadioBtn.getText());  
        }
         
         //Select the location as per sent request
         request.setLocation(String.valueOf(locationComboBox.getSelectedItem()));
          
         request.setStatus("Sent");
        
        
        Organization org = null;
        Enterprise   e = enterprise;
     
        for (Organization organization : e.getOrganizationDirectory().getOrganizationList())
        {
            if (organization instanceof staffOrganisation){
              org = organization;
                break;
            }
        }
      
        if (org!=null)
        {
          org.getWorkQueue().getWorkRequestList().add(request);
          userAccount.getWorkQueue().getWorkRequestList().add(request);

        }
      
        JOptionPane.showMessageDialog(null,"Request raised","Success",JOptionPane.INFORMATION_MESSAGE);     
        
        jTextArea1.setText("");
        areaButtonGroup.clearSelection();
        locationComboBox.removeAllItems();
    }//GEN-LAST:event_submitButtonActionPerformed

    private void backJButtonActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_backJButtonActionPerformed

        userProcessContainer.remove(this);
        Component[] componentArray = userProcessContainer.getComponents();
        Component component = componentArray[componentArray.length - 1];
        SupervisorWorkAreaJPanel dwjp = (SupervisorWorkAreaJPanel) component;
        dwjp.populateRequestTable();
        CardLayout layout = (CardLayout)userProcessContainer.getLayout();
        layout.previous(userProcessContainer);

    }//GEN-LAST:event_backJButtonActionPerformed

    private void indRadioBtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_indRadioBtnActionPerformed
        // TODO add your handling code here:
             locationComboBox.removeAllItems();
             locationComboBox.addItem("Andheri");
             locationComboBox.addItem("Bhiwandi");
             locationComboBox.addItem("Turbhe");
             locationComboBox.addItem("Mahape");
    }//GEN-LAST:event_indRadioBtnActionPerformed

    private void resRadioBtnActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_resRadioBtnActionPerformed
        // TODO add your handling code here:
             locationComboBox.removeAllItems();;
             locationComboBox.addItem("RA Colony");
             locationComboBox.addItem("Powai");
             locationComboBox.addItem("Mulund");
             locationComboBox.addItem("Bandra");
             locationComboBox.addItem("Juhu");
        
    }//GEN-LAST:event_resRadioBtnActionPerformed


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.ButtonGroup areaButtonGroup;
    private javax.swing.JLabel areaLabel;
    private javax.swing.JButton backJButton;
    private javax.swing.JLabel enterpriseLabel;
    private javax.swing.JRadioButton indRadioBtn;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTextArea jTextArea1;
    private javax.swing.JComboBox locationComboBox;
    private javax.swing.JLabel locationLabel;
    private javax.swing.JLabel messageLabel;
    private javax.swing.JRadioButton resRadioBtn;
    private javax.swing.JToggleButton submitButton;
    private javax.swing.JLabel valueLabel;
    // End of variables declaration//GEN-END:variables
}
